#pragma config(Hubs,  S4, HTMotor,  HTMotor,  HTMotor,  HTServo)
#pragma config(Sensor, S2,     gyro,           sensorNone)
#pragma config(Sensor, S1,     US,             sensorSONAR)
#pragma config(Motor,  mtr_S4_C1_1,     intake,        tmotorTetrix, openLoop, reversed)
#pragma config(Motor,  mtr_S4_C1_2,     driveL,        tmotorTetrix, openLoop, reversed)
#pragma config(Motor,  mtr_S4_C2_1,     launcher,      tmotorTetrix, openLoop, reversed, encoder)
#pragma config(Motor,  mtr_S4_C2_2,     liftL,         tmotorTetrix, openLoop, reversed, encoder)
#pragma config(Motor,  mtr_S4_C3_1,     driveR,        tmotorTetrix, openLoop, reversed, encoder)
#pragma config(Motor,  mtr_S4_C3_2,     liftR,         tmotorTetrix, openLoop)
#pragma config(Servo,  srvo_S4_C4_1,    goal,                 tServoStandard)
#pragma config(Servo,  srvo_S4_C4_2,    shrub,                tServoContinuousRotation)
#pragma config(Servo,  srvo_S4_C4_3,    net,                  tServoStandard)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//
#pragma DebuggerWindows("debugStream")
#pragma DebuggerWindows("nxtLCDScreen")

#include "pathfinding.h"

world w;

task main()
{
    startTask(ultrasonic_loop);

    w.robot_pos.x  = 50*3;
    w.robot_pos.y  = 32*3;
    w.robot_angle = 0;
    w.n_points = 0;

    setPixel(w.robot_pos.x/3, w.robot_pos.y/3);

    int new_button_pressed = 0;
    int old_button_pressed = 0;
    for ever
    {
        new_button_pressed = nNxtButtonPressed;
        if(new_button_pressed == 2 && old_button_pressed != 2)
        {
            clearTimer(T1);
            addUSPoint(w, US_dist);
            writeDebugStreamLine("%i", time1[T1]);
            w.robot_angle += 15;
        }
        if(new_button_pressed == 1 && old_button_pressed != 1)
        {
            addUSPoint(w, US_dist);
            w.robot_angle -= 15;
        }
        old_button_pressed = new_button_pressed;
    }
}
